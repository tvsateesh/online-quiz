<ng-container *ngIf="!isSigningUp">
  <div class="signup-container" [class.hidden]="isSigningUp">
    <div class="signup-wrapper">
      <div class="signup-card">
        <div class="signup-header">
          <div class="logo-container">
            <img src="assets/brain-games-icon.svg" alt="Brain Games" class="signup-logo">
          </div>
          <h1 class="signup-title">Join Brain Games!</h1>
          <p class="signup-subtitle">Create an account to start playing</p>
        </div>

        <form class="signup-form" [formGroup]="signupForm" (ngSubmit)="registerUser()">
          <!-- Username -->
          <div class="form-group">
            <label for="signup-username" class="form-label">
              <i class="fa fa-user"></i>
              Username
            </label>
            <div class="input-wrapper">
              <input
                type="text"
                id="signup-username"
                formControlName="username"
                maxlength="20"
                class="form-input"
                placeholder="Choose a username (3+ characters)"
              >
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('username')">
              <i class="fa fa-exclamation-circle"></i>
              {{ getFieldErrorMessage('username') }}
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <label for="signup-email" class="form-label">
              <i class="fa fa-envelope"></i>
              Email
            </label>
            <div class="input-wrapper">
              <input
                type="email"
                id="signup-email"
                formControlName="email"
                class="form-input"
                placeholder="Enter your email"
              >
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('email')">
              <i class="fa fa-exclamation-circle"></i>
              {{ getFieldErrorMessage('email') }}
            </div>
          </div>

          <!-- First Name -->
          <div class="form-group">
            <label for="signup-firstname" class="form-label">
              <i class="fa fa-id-card"></i>
              First Name (Optional)
            </label>
            <div class="input-wrapper">
              <input
                type="text"
                id="signup-firstname"
                formControlName="firstName"
                class="form-input"
                placeholder="Your first name"
              >
            </div>
          </div>

          <!-- Last Name -->
          <div class="form-group">
            <label for="signup-lastname" class="form-label">
              <i class="fa fa-id-card"></i>
              Last Name (Optional)
            </label>
            <div class="input-wrapper">
              <input
                type="text"
                id="signup-lastname"
                formControlName="lastName"
                class="form-input"
                placeholder="Your last name"
              >
            </div>
          </div>

          <!-- Password -->
          <div class="form-group">
            <label for="signup-password" class="form-label">
              <i class="fa fa-lock"></i>
              Password
            </label>
            <div class="input-wrapper">
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="signup-password"
                formControlName="password"
                maxlength="50"
                class="form-input"
                placeholder="Create a strong password (6+ characters)"
              >
              <button
                type="button"
                class="password-toggle"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
              >
                <i [class]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
              </button>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('password')">
              <i class="fa fa-exclamation-circle"></i>
              {{ getFieldErrorMessage('password') }}
            </div>
          </div>

          <!-- Confirm Password -->
          <div class="form-group">
            <label for="signup-confirm-password" class="form-label">
              <i class="fa fa-lock"></i>
              Confirm Password
            </label>
            <div class="input-wrapper">
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                id="signup-confirm-password"
                formControlName="confirmPassword"
                maxlength="50"
                class="form-input"
                placeholder="Confirm your password"
              >
              <button
                type="button"
                class="password-toggle"
                (click)="toggleConfirmPasswordVisibility()"
                [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
              >
                <i [class]="showConfirmPassword ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
              </button>
            </div>
            <div class="error-message" *ngIf="isFieldInvalid('confirmPassword')">
              <i class="fa fa-exclamation-circle"></i>
              {{ getFieldErrorMessage('confirmPassword') }}
            </div>
          </div>

          <!-- Error Message -->
          <div class="error-message" *ngIf="errorMsg">
            <i class="fa fa-exclamation-circle"></i>
            {{ errorMsg }}
          </div>

          <!-- Success Message -->
          <div class="success-message" *ngIf="successMsg">
            <i class="fa fa-check-circle"></i>
            {{ successMsg }}
          </div>

          <!-- Sign Up Button -->
          <button
            type="submit"
            class="signup-btn"
            [disabled]="!signupForm.valid || isLoading"
          >
            <span *ngIf="!isLoading">
              Create Account
              <i class="fa fa-arrow-right"></i>
            </span>
            <span *ngIf="isLoading">
              <i class="fa fa-spinner fa-spin"></i>
              Creating Account...
            </span>
          </button>
        </form>

        <!-- Login Link -->
        <div class="signup-footer">
          <p class="footer-text">
            Already have an account?
            <a href="/login" class="login-link">Sign In</a>
          </p>
        </div>
      </div>

      <div class="features-section">
        <h3 class="features-title">Get Started Now!</h3>
        <div class="features-list">
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa fa-brain"></i>
            </div>
            <div class="feature-text">
              <h4>Challenge Your Mind</h4>
              <p>Test your cognitive skills with engaging games</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa fa-chart-line"></i>
            </div>
            <div class="feature-text">
              <h4>Track Progress</h4>
              <p>Monitor your performance and improvement over time</p>
            </div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa fa-trophy"></i>
            </div>
            <div class="feature-text">
              <h4>Compete & Win</h4>
              <p>Challenge yourself and reach the top scores</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
