<app-header></app-header>

<div class="games-layout">
  <!-- Left Sidebar with Game Selection -->
  <aside class="games-sidebar">
    <div class="sidebar-header">
      <h2 class="sidebar-title">
        <i class="fa fa-gamepad"></i>
        Brain Games
      </h2>
      <p class="sidebar-subtitle">Choose a game</p>
      
      <!-- Stats Button -->
      <button class="stats-button" (click)="toggleStatsPanel()" title="View your game statistics">
        <i class="fa fa-bar-chart"></i>
        <span>My Stats</span>
        <span class="stats-badge" *ngIf="userStats && userStats.totalGamesPlayed">{{ userStats?.totalGamesPlayed }}</span>
      </button>
    </div>
    
    <nav class="games-menu">
      <a routerLink="/games/chess-game" routerLinkActive="active" (click)="onMenuItemClick('chess-game')" class="menu-item chess">
        <div class="menu-icon">
          <i class="fa fa-trophy"></i>
        </div>
        <span class="menu-label">Chess</span>
      </a>
      
      <a routerLink="/games/checkers-game" routerLinkActive="active" (click)="onMenuItemClick('checkers-game')" class="menu-item checkers">
        <div class="menu-icon">
          <i class="fa fa-circle"></i>
        </div>
        <span class="menu-label">Checkers</span>
      </a>
      
      <a routerLink="/games/escape-room" routerLinkActive="active" (click)="onMenuItemClick('escape-room')" class="menu-item escape-room">
        <div class="menu-icon">
          <i class="fa fa-key"></i>
        </div>
        <span class="menu-label">Escape Room</span>
      </a>
      
      <a routerLink="/games/dice-game" routerLinkActive="active" (click)="onMenuItemClick('dice-game')" class="menu-item dice">
        <div class="menu-icon">
          <i class="fa fa-cube"></i>
        </div>
        <span class="menu-label">Dice Game</span>
      </a>
      
      <a routerLink="/games/tic-tac-toe" routerLinkActive="active" (click)="onMenuItemClick('tic-tac-toe')" class="menu-item tictactoe">
        <div class="menu-icon">
          <i class="fa fa-th"></i>
        </div>
        <span class="menu-label">Tic Tac Toe</span>
      </a>
      
      <a routerLink="/games/word-game" routerLinkActive="active" (click)="onMenuItemClick('word-game')" class="menu-item word">
        <div class="menu-icon">
          <i class="fa fa-font"></i>
        </div>
        <span class="menu-label">Word Game</span>
      </a>
      
      <a routerLink="/games/sudoku" routerLinkActive="active" (click)="onMenuItemClick('sudoku')" class="menu-item sudoku">
        <div class="menu-icon">
          <i class="fa fa-table"></i>
        </div>
        <span class="menu-label">Sudoku</span>
      </a>
      
      <a routerLink="/games/word-hunt" routerLinkActive="active" (click)="onMenuItemClick('word-hunt')" class="menu-item wordhunt">
        <div class="menu-icon">
          <i class="fa fa-search"></i>
        </div>
        <span class="menu-label">Word Hunt</span>
      </a>
      
      <a routerLink="/games/odd-man-out" routerLinkActive="active" (click)="onMenuItemClick('odd-man-out')" class="menu-item oddmanout">
        <div class="menu-icon">
          <i class="fa fa-puzzle-piece"></i>
        </div>
        <span class="menu-label">Odd Man Out</span>
      </a>
      <a routerLink="/stocks" routerLinkActive="active" class="menu-item stock">
        <div class="menu-icon">
          <i class="fa fa-line-chart"></i>
        </div>
        <span class="menu-label">Rock-Stock</span>
      </a>
    </nav>
  </aside>
  
  <!-- Right Content Area for Game Components -->
  <main class="games-content">
    <router-outlet></router-outlet>
    
    <!-- Stats Panel -->
    <div class="stats-panel" *ngIf="showStatsPanel" [@fadeInOut]>
      <div class="stats-container">
        <div class="stats-header">
          <h2>
            <i class="fa fa-bar-chart"></i>
            Game Statistics
          </h2>
          <button class="close-btn" (click)="toggleStatsPanel()">
            <i class="fa fa-times"></i>
          </button>
        </div>
        
        <div class="stats-content" *ngIf="userStats">
          <!-- Overall Summary -->
          <div class="summary-section">
            <div class="summary-card">
              <div class="stat-value">{{ userStats.totalGamesPlayed }}</div>
              <div class="stat-label">Total Games</div>
            </div>
          </div>
          
          <!-- Per-Game Stats -->
          <div class="games-detail" *ngIf="userStats.gameStats.length > 0">
            <div class="game-stat-card" *ngFor="let game of userStats.gameStats">
              <div class="game-header">
                <h3>{{ game.gameName }}</h3>
                <div class="win-rate" [ngClass]="game.winRate >= 70 ? 'high-rate' : game.winRate >= 40 ? 'medium-rate' : 'low-rate'">
                  {{ game.winRate }}% Win Rate
                </div>
              </div>
              <div class="game-stats-grid">
                <div class="stat">
                  <div class="label">Games</div>
                  <div class="value">{{ game.totalGames }}</div>
                </div>
                <div class="stat wins">
                  <div class="label">Wins</div>
                  <div class="value">{{ game.wins }}</div>
                </div>
                <div class="stat losses">
                  <div class="label">Losses</div>
                  <div class="value">{{ game.losses }}</div>
                </div>
                <div class="stat">
                  <div class="label">Avg Score</div>
                  <div class="value">{{ game.avgScore }}</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="no-stats" *ngIf="userStats.gameStats.length === 0">
            <p>No games played yet. Start playing to see your statistics!</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Welcome screen shown when no game is selected -->
    <div class="welcome-screen" *ngIf="!hasActiveRoute()">
      <div class="welcome-icon">
        <i class="fa fa-gamepad"></i>
      </div>
      <h1 class="welcome-title">Welcome to <span class="text-gradient">Brain Games</span></h1>
      <p class="welcome-text">Select a game from the menu to start playing!</p>
      <div class="welcome-features">
        <div class="feature-item">
          <i class="fa fa-brain"></i>
          <span>Train Your Brain</span>
        </div>
        <div class="feature-item">
          <i class="fa fa-trophy"></i>
          <span>Challenge Yourself</span>
        </div>
        <div class="feature-item">
          <i class="fa fa-clock"></i>
          <span>Track Your Progress</span>
        </div>
      </div>
    </div>
  </main>
</div>
